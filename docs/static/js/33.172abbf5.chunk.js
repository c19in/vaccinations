(this.webpackJsonpvaccinations=this.webpackJsonpvaccinations||[]).push([[33],{132:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(25);function a(e,t){var n;if(void 0===t){var a,c=Object(r.a)(e);try{for(c.s();!(a=c.n()).done;){var i=a.value;null!=i&&(n<i||void 0===n&&i>=i)&&(n=i)}}catch(h){c.e(h)}finally{c.f()}}else{var s,o=-1,u=Object(r.a)(e);try{for(u.s();!(s=u.n()).done;){var l=s.value;null!=(l=t(l,++o,e))&&(n<l||void 0===n&&l>=l)&&(n=l)}}catch(h){u.e(h)}finally{u.f()}}return n}},265:function(e,t,n){"use strict";n.r(t);var r=n(45),a=n(11),c=n(24),i=n(92),s=n.n(i),o=n(135),u=n(132),l=n(140),h=n(25),f=n(241),b=n(244),d={capture:!0,passive:!1};var v=function(e){e.preventDefault(),e.stopImmediatePropagation()},p=function(e){var t=e.document.documentElement,n=Object(b.a)(e).on("dragstart.drag",v,d);"onselectstart"in t?n.on("selectstart.drag",v,d):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")};function m(e,t){var n=e.document.documentElement,r=Object(b.a)(e).on("dragstart.drag",null);t&&(r.on("click.drag",v,d),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var y=n(270),j=n(168),g=n(101),O=function(e){return function(){return e}};function w(e,t){var n=t.sourceEvent,r=t.target,a=t.selection,c=t.mode,i=t.dispatch;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},selection:{value:a,enumerable:!0,configurable:!0},mode:{value:c,enumerable:!0,configurable:!0},_:{value:i}})}function x(e){e.stopImmediatePropagation()}var k=function(e){e.preventDefault(),e.stopImmediatePropagation()},_={name:"drag"},M={name:"space"},A={name:"handle"},z={name:"center"},E=Math.abs,N=Math.max,S=Math.min;function P(e){return[+e[0],+e[1]]}function T(e){return[P(e[0]),P(e[1])]}var C={name:"x",handles:["w","e"].map(V),input:function(e,t){return null==e?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},I={name:"y",handles:["n","s"].map(V),input:function(e,t){return null==e?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},B=(["n","w","e","s","nw","ne","sw","se"].map(V),{overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"}),D={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},K={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},U={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},H={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function V(e){return{type:e}}function J(e){return!e.ctrlKey&&!e.button}function R(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function X(){return navigator.maxTouchPoints||"ontouchstart"in this}function G(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function L(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function W(e){var t,n=R,r=J,a=X,c=!0,i=Object(f.a)("start","brush","end"),s=6;function o(t){var n=t.property("__brush",Y).selectAll(".overlay").data([V("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",B.overlay).merge(n).each((function(){var e=G(this).extent;Object(b.a)(this).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1])})),t.selectAll(".selection").data([V("selection")]).enter().append("rect").attr("class","selection").attr("cursor",B.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=t.selectAll(".handle").data(e.handles,(function(e){return e.type}));r.exit().remove(),r.enter().append("rect").attr("class",(function(e){return"handle handle--"+e.type})).attr("cursor",(function(e){return B[e.type]})),t.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",v).filter(a).on("touchstart.brush",v).on("touchmove.brush",P).on("touchend.brush touchcancel.brush",W).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function u(){var e=Object(b.a)(this),t=G(this).selection;t?(e.selectAll(".selection").style("display",null).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1]),e.selectAll(".handle").style("display",null).attr("x",(function(e){return"e"===e.type[e.type.length-1]?t[1][0]-s/2:t[0][0]-s/2})).attr("y",(function(e){return"s"===e.type[0]?t[1][1]-s/2:t[0][1]-s/2})).attr("width",(function(e){return"n"===e.type||"s"===e.type?t[1][0]-t[0][0]+s:s})).attr("height",(function(e){return"e"===e.type||"w"===e.type?t[1][1]-t[0][1]+s:s}))):e.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function l(e,t,n){var r=e.__brush.emitter;return!r||n&&r.clean?new d(e,t,n):r}function d(e,t,n){this.that=e,this.args=t,this.state=e.__brush,this.active=0,this.clean=n}function v(n){if((!t||n.touches)&&r.apply(this,arguments)){var a,i,s,o,f,d,v,y,O,w,P,T=this,V=n.target.__data__.type,J="selection"===(c&&n.metaKey?V="overlay":V)?_:c&&n.altKey?z:A,R=e===I?null:U[V],X=e===C?null:H[V],W=G(T),Y=W.extent,q=W.selection,F=Y[0][0],Q=Y[0][1],Z=Y[1][0],$=Y[1][1],ee=0,te=0,ne=R&&X&&c&&n.shiftKey,re=Array.from(n.touches||[n],(function(e){var t=e.identifier;return(e=Object(j.a)(e,T)).point0=e.slice(),e.identifier=t,e}));Object(g.a)(T);var ae=l(T,arguments,!0).beforestart();if("overlay"===V){q&&(O=!0);var ce=[re[0],re[1]||re[0]];W.selection=q=[[a=e===I?F:S(ce[0][0],ce[1][0]),s=e===C?Q:S(ce[0][1],ce[1][1])],[f=e===I?Z:N(ce[0][0],ce[1][0]),v=e===C?$:N(ce[0][1],ce[1][1])]],re.length>1&&le(n)}else a=q[0][0],s=q[0][1],f=q[1][0],v=q[1][1];i=a,o=s,d=f,y=v;var ie=Object(b.a)(T).attr("pointer-events","none"),se=ie.selectAll(".overlay").attr("cursor",B[V]);if(n.touches)ae.moved=ue,ae.ended=he;else{var oe=Object(b.a)(n.view).on("mousemove.brush",ue,!0).on("mouseup.brush",he,!0);c&&oe.on("keydown.brush",fe,!0).on("keyup.brush",be,!0),p(n.view)}u.call(T),ae.start(n,J.name)}function ue(e){var t,n=Object(h.a)(e.changedTouches||[e]);try{for(n.s();!(t=n.n()).done;){var r,a=t.value,c=Object(h.a)(re);try{for(c.s();!(r=c.n()).done;){var i=r.value;i.identifier===a.identifier&&(i.cur=Object(j.a)(a,T))}}catch(f){c.e(f)}finally{c.f()}}}catch(f){n.e(f)}finally{n.f()}if(ne&&!w&&!P&&1===re.length){var s=re[0];E(s.cur[0]-s[0])>E(s.cur[1]-s[1])?P=!0:w=!0}var o,u=Object(h.a)(re);try{for(u.s();!(o=u.n()).done;){var l=o.value;l.cur&&(l[0]=l.cur[0],l[1]=l.cur[1])}}catch(f){u.e(f)}finally{u.f()}O=!0,k(e),le(e)}function le(e){var t,n=re[0],r=n.point0;switch(ee=n[0]-r[0],te=n[1]-r[1],J){case M:case _:R&&(ee=N(F-a,S(Z-f,ee)),i=a+ee,d=f+ee),X&&(te=N(Q-s,S($-v,te)),o=s+te,y=v+te);break;case A:re[1]?(R&&(i=N(F,S(Z,re[0][0])),d=N(F,S(Z,re[1][0])),R=1),X&&(o=N(Q,S($,re[0][1])),y=N(Q,S($,re[1][1])),X=1)):(R<0?(ee=N(F-a,S(Z-a,ee)),i=a+ee,d=f):R>0&&(ee=N(F-f,S(Z-f,ee)),i=a,d=f+ee),X<0?(te=N(Q-s,S($-s,te)),o=s+te,y=v):X>0&&(te=N(Q-v,S($-v,te)),o=s,y=v+te));break;case z:R&&(i=N(F,S(Z,a-ee*R)),d=N(F,S(Z,f+ee*R))),X&&(o=N(Q,S($,s-te*X)),y=N(Q,S($,v+te*X)))}d<i&&(R*=-1,t=a,a=f,f=t,t=i,i=d,d=t,V in D&&se.attr("cursor",B[V=D[V]])),y<o&&(X*=-1,t=s,s=v,v=t,t=o,o=y,y=t,V in K&&se.attr("cursor",B[V=K[V]])),W.selection&&(q=W.selection),w&&(i=q[0][0],d=q[1][0]),P&&(o=q[0][1],y=q[1][1]),q[0][0]===i&&q[0][1]===o&&q[1][0]===d&&q[1][1]===y||(W.selection=[[i,o],[d,y]],u.call(T),ae.brush(e,J.name))}function he(e){if(x(e),e.touches){if(e.touches.length)return;t&&clearTimeout(t),t=setTimeout((function(){t=null}),500)}else m(e.view,O),oe.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);ie.attr("pointer-events","all"),se.attr("cursor",B.overlay),W.selection&&(q=W.selection),L(q)&&(W.selection=null,u.call(T)),ae.end(e,J.name)}function fe(e){switch(e.keyCode){case 16:ne=R&&X;break;case 18:J===A&&(R&&(f=d-ee*R,a=i+ee*R),X&&(v=y-te*X,s=o+te*X),J=z,le(e));break;case 32:J!==A&&J!==z||(R<0?f=d-ee:R>0&&(a=i-ee),X<0?v=y-te:X>0&&(s=o-te),J=M,se.attr("cursor",B.selection),le(e));break;default:return}k(e)}function be(e){switch(e.keyCode){case 16:ne&&(w=P=ne=!1,le(e));break;case 18:J===z&&(R<0?f=d:R>0&&(a=i),X<0?v=y:X>0&&(s=o),J=A,le(e));break;case 32:J===M&&(e.altKey?(R&&(f=d-ee*R,a=i+ee*R),X&&(v=y-te*X,s=o+te*X),J=z):(R<0?f=d:R>0&&(a=i),X<0?v=y:X>0&&(s=o),J=A),se.attr("cursor",B[V]),le(e));break;default:return}k(e)}}function P(e){l(this,arguments).moved(e)}function W(e){l(this,arguments).ended(e)}function Y(){var t=this.__brush||{selection:null};return t.extent=T(n.apply(this,arguments)),t.dim=e,t}return o.move=function(t,n,r){t.tween?t.on("start.brush",(function(e){l(this,arguments).beforestart().start(e)})).on("interrupt.brush end.brush",(function(e){l(this,arguments).end(e)})).tween("brush",(function(){var t=this,r=t.__brush,a=l(t,arguments),c=r.selection,i=e.input("function"===typeof n?n.apply(this,arguments):n,r.extent),s=Object(y.a)(c,i);function o(e){r.selection=1===e&&null===i?null:s(e),u.call(t),a.brush()}return null!==c&&null!==i?o:o(1)})):t.each((function(){var t=this,a=arguments,c=t.__brush,i=e.input("function"===typeof n?n.apply(t,a):n,c.extent),s=l(t,a).beforestart();Object(g.a)(t),c.selection=null===i?null:i,u.call(t),s.start(r).brush(r).end(r)}))},o.clear=function(e,t){o.move(e,null,t)},d.prototype={beforestart:function(){return 1===++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(e,t){return this.starting?(this.starting=!1,this.emit("start",e,t)):this.emit("brush",e),this},brush:function(e,t){return this.emit("brush",e,t),this},end:function(e,t){return 0===--this.active&&(delete this.state.emitter,this.emit("end",e,t)),this},emit:function(t,n,r){var a=Object(b.a)(this.that).datum();i.call(t,this.that,new w(t,{sourceEvent:n,target:o,selection:e.output(this.state.selection),mode:r,dispatch:i}),a)}},o.extent=function(e){return arguments.length?(n="function"===typeof e?e:O(T(e)),o):n},o.filter=function(e){return arguments.length?(r="function"===typeof e?e:O(!!e),o):r},o.touchable=function(e){return arguments.length?(a="function"===typeof e?e:O(!!e),o):a},o.handleSize=function(e){return arguments.length?(s=+e,o):s},o.keyModifiers=function(e){return arguments.length?(c=!!e,o):c},o.on=function(){var e=i.on.apply(i,arguments);return e===i?o:e},o}var Y=n(117),q=n(264),F=n(138),Q=n(120),Z=n(134),$=n(133),ee=function(e,t){if((a=e.length)>1)for(var n,r,a,c=1,i=e[t[0]],s=i.length;c<a;++c)for(r=i,i=e[t[c]],n=0;n<s;++n)i[n][1]+=i[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]},te=function(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n};function ne(e,t){return e[t]}function re(e){var t=[];return t.key=e,t}var ae=n(259),ce=n(246),ie=n(67),se=n(55),oe=n(82),ue=n(91),le=n.n(ue),he=n(2),fe=n(54),be=n.n(fe),de=n(113),ve=n(19),pe=0,me=35,ye=20,je=25;function ge(e){var t=e.timeseries,n=e.dates,i=e.currentBrushSelection,f=e.endDate,d=e.lookback,v=e.setBrushSelectionEnd,p=e.setLookback,m=e.animationIndex,y=Object(he.useRef)(),g=Object(de.a)(),O=Object(r.a)(g,2),w=O[0],x=O[1],k=x.width,_=x.height,M=null!==d?Object(o.a)([Object(ie.a)(Object(se.a)(Object(c.k)(n[0]),d),{representation:"date"}),f]):f,A=Object(he.useMemo)((function(){var e=n.length,t=k-me;return Object(q.a)().clamp(!0).domain([Object(c.k)(n[0]||f),Object(c.k)(n[e-1]||f)]).range([je,t])}),[k,f,n]);Object(he.useEffect)((function(){if(k&&_){var e=_-ye,i=function(){var e=Object($.a)([]),t=te,n=ee,r=ne;function a(a){var c,i,s,o=Array.from(e.apply(this,arguments),re),u=o.length,l=-1,f=Object(h.a)(a);try{for(f.s();!(s=f.n()).done;){var b=s.value;for(c=0,++l;c<u;++c)(o[c][l]=[0,+r(b,o[c].key,l,a)]).data=b}}catch(d){f.e(d)}finally{f.f()}for(c=0,i=Object(Z.a)(t(o));c<u;++c)o[i[c]].index=c;return n(o,i),o}return a.keys=function(t){return arguments.length?(e="function"===typeof t?t:Object($.a)(Array.from(t)),a):e},a.value=function(e){return arguments.length?(r="function"===typeof e?e:Object($.a)(+e),a):r},a.order=function(e){return arguments.length?(t=null==e?te:"function"===typeof e?e:Object($.a)(Array.from(e)),a):t},a.offset=function(e){return arguments.length?(n=null==e?ee:e,a):n},a}().keys(a.c).value((function(e,n){return Math.max(0,Object(c.i)(t[e],"delta",n))}))(n),s=Object(F.a)().clamp(!0).domain([0,Object(u.a)(i[i.length-1],(function(e){return 1.2*Object(r.a)(e,2)[1]}))]).range([e,pe]),o=Object(b.a)(y.current),f=o.transition().duration(a.d);o.select(".x-axis").attr("pointer-events","none").style("transform","translate3d(0, ".concat(e,"px, 0)")).transition(f).call((function(e){return e.attr("class","x-axis").call(Object(l.a)(A).ticks(function(e){return e<480?4:6}(k)))}));var d=Object(ae.a)().curve(ce.a).x((function(e){return A(Object(c.k)(e.data))})).y0((function(e){return s(e[0])})).y1((function(e){return s(e[1])}));o.select(".trend-areas").selectAll(".trend-area").data(i).join((function(e){return e.append("path").attr("class","trend-area").attr("fill",(function(e){var t=e.key;return a.z[t].color})).attr("fill-opacity",.4).attr("stroke",(function(e){var t=e.key;return a.z[t].color})).attr("d",d).attr("pointer-events","none")}),(function(e){return e.transition(f).attrTween("d",(function(e){var t=Object(b.a)(this).attr("d"),n=d(e);return Object(Y.a)(t,n)})).selection()}))}}),[n,k,_,A,t]);var z=i.map((function(e){return A(Object(c.k)(e))})),E=Object(he.useMemo)((function(){if(k&&_){var e=k-me,t=_-ye;return W(C).extent([[je,pe],[e,t]]).handleSize(20)}}),[k,_]),N=Object(he.useCallback)((function(e){var t=e.sourceEvent,n=e.selection;if(t){var a=n.map(A.invert),c=Object(r.a)(a,2),i=c[0],s=c[1];be.a.unstable_batchedUpdates((function(){v(Object(ie.a)(s,{representation:"date"})),p(Object(oe.a)(s,i))}))}}),[A,v,p]),S=Object(he.useCallback)((function(e){var t=Object(b.a)(y.current),n=function(e){var t=e.__brush;return t?t.dim.output(t.selection):null}(t.select(".brush").node());if(n){var a,c,i=n[1]-n[0],s=((a=e).target&&(a=Object(Q.a)(a),void 0===c&&(c=a.currentTarget),a=a.touches||[a]),Array.from(a,(function(e){return Object(j.a)(e,c)}))),o=Object(r.a)(s,1),u=Object(r.a)(o[0],1)[0],l=u-i/2,h=u+i/2,f=A.range(),d=Object(r.a)(f,2),v=d[0],p=d[1];t.select(".brush").call(E.move,h>p?[p-i,p]:l<v?[v,v+i]:[l,h])}}),[E,A]),P=Object(he.useCallback)((function(e){var t=e.sourceEvent,n=e.selection;if(t&&n){var r=n.map(A.invert).map((function(e){return Object(ie.a)(e,{representation:"date"})}));Object(b.a)(y.current).select(".brush").call(E.move,r.map((function(e){return A(Object(c.k)(e))}))).call((function(e){return e.select(".overlay").attr("cursor","pointer")}))}}),[E,A]);Object(he.useEffect)((function(){E&&(E.on("start brush",N).on("end",P),Object(b.a)(y.current).select(".brush").call(E).call((function(e){return e.select(".overlay").attr("cursor","pointer").datum({type:"selection"}).on("mousedown touchstart",S)})))}),[E,N,P,S]),Object(he.useEffect)((function(){E&&Object(b.a)(y.current).select(".brush").call(E.move,z)}),[E,z]);return Object(ve.jsx)("div",{className:"Timeseries",children:Object(ve.jsx)("div",{className:s()("svg-parent is-brush fadeInUp"),ref:w,onWheel:function(e){e.deltaX&&v(Object(u.a)([M,n[Math.max(0,Math.min(n.length-1,n.indexOf(i[1])+10*Math.sign(e.deltaX)))]]))},style:{animationDelay:"".concat(250*m,"ms")},children:Object(ve.jsxs)("svg",{ref:y,preserveAspectRatio:"xMidYMid meet",children:[Object(ve.jsxs)("defs",{children:[Object(ve.jsx)("clipPath",{id:"clipPath",children:Object(ve.jsx)("rect",{x:0,y:"".concat(pe),width:k,height:"".concat(Math.max(0,_-ye))})}),Object(ve.jsxs)("mask",{id:"mask",children:[Object(ve.jsx)("rect",{x:0,y:"".concat(pe),width:k,height:"".concat(Math.max(0,_-ye)),fill:"hsl(0, 0%, 40%)"}),Object(ve.jsx)("use",{href:"#selection",fill:"white"})]})]}),Object(ve.jsx)("g",{className:"brush",clipPath:"url(#clipPath)",children:Object(ve.jsxs)("g",{mask:"url(#mask)",children:[Object(ve.jsx)("rect",{className:"overlay"}),Object(ve.jsx)("g",{className:"trend-areas"}),Object(ve.jsx)("rect",{className:"selection",id:"selection"})]})}),Object(ve.jsx)("g",{className:"x-axis"})]})})})}var Oe=function(e,t){return!!le()(t.currentBrushSelection,e.currentBrushSelection)&&(!!le()(t.regionHighlighted.stateCode,e.regionHighlighted.stateCode)&&(!!le()(t.regionHighlighted.districtName,e.regionHighlighted.districtName)&&(!!le()(t.endDate,e.endDate)&&(!!le()(t.lookback,e.lookback)&&(!!le()(t.animationIndex,e.animationIndex)&&!!le()(t.dates,e.dates))))))};t.default=Object(he.memo)(ge,Oe)}}]);
//# sourceMappingURL=33.172abbf5.chunk.js.map